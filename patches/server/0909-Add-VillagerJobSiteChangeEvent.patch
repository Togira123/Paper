From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Togira <70365614+Togira123@users.noreply.github.com>
Date: Sat, 4 Jun 2022 17:43:54 +0200
Subject: [PATCH] Add VillagerJobSiteChangeEvent


diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/AssignProfessionFromJobSite.java b/src/main/java/net/minecraft/world/entity/ai/behavior/AssignProfessionFromJobSite.java
index abbc85c900a76685f00f3767ac5e54fc5c833523..e01839fa9802c4a1d697e3ad67630d3d440551cd 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/AssignProfessionFromJobSite.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/AssignProfessionFromJobSite.java
@@ -31,6 +31,13 @@ public class AssignProfessionFromJobSite extends Behavior<Villager> {
     }
 
     protected void start(ServerLevel world, Villager entity, long time) {
+        // Paper start - VillagerJobSiteChangeEvent
+        boolean cancelled = !new io.papermc.paper.event.entity.VillagerJobSiteChangeEvent((org.bukkit.entity.Villager) entity.getBukkitEntity()).callEvent();
+        if (cancelled) {
+            return;
+        }
+        // Paper end - VillagerJobSiteChangeEvent
+
         GlobalPos globalpos = (GlobalPos) entity.getBrain().getMemory(MemoryModuleType.POTENTIAL_JOB_SITE).get();
 
         entity.getBrain().eraseMemory(MemoryModuleType.POTENTIAL_JOB_SITE);
